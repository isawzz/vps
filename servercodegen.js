//#region basic express app
const express = require('express');
const app = express();
const http = require('http');
const server = http.createServer(app);
const cors = require('cors');
const yaml = require('yaml');
const fs = require('fs');
app.use(cors());
app.use(express.static(__dirname + '')); //Serve root directory
app.use(express.json());
//#endregion done

//#region imports from servercode in basejs
const {
	parseCodefile,
	parseCodefile1,
	HPLayout,
	HRPLayout,
	HSLAToRGBA,
	HSLToRGB,
	PHLayout,
	PRHLayout,
	RGBAToHSLA,
	RGBAToHex9,
	RGBToHSL,
	RGBToHex7,
	_calc_hex_col_array,
	_calc_hex_col_array_old,
	_deqSound,
	_enqSound,
	_evToClass,
	_gCreate,
	_gSizeToContent,
	_mStamp,
	_rChoose,
	_selectText,
	_unfocusOnEnter,
	_valf,
	_whenSoundPaused,
	aFlip,
	aJumpby,
	aMove,
	aRestore,
	aRollby,
	aRotate,
	aRotateAccel,
	aSvg,
	aSvgg,
	aTranslateBy,
	aTranslateByEase,
	aTranslateFadeBy,
	activate_playerstats,
	activate_ui,
	addIf,
	addKeys,
	addMonthToDate,
	addRowsCols,
	addWeekToDate,
	add_transaction,
	agCircle,
	agColoredShape,
	agEllipse,
	agG,
	agHex,
	agLine,
	agPoly,
	agRect,
	agShape,
	aggregate_elements,
	aggregate_player_hands_by_rank,
	allNumbers,
	alphaToHex,
	anim_face_down,
	anim_face_up,
	anim_toggle_face,
	animateProperty,
	animatePropertyX,
	animate_card_approx,
	animate_card_exchange,
	animate_card_transfer,
	animate_title,
	animatedTitle,
	ari_get_card,
	ari_get_card_large,
	ari_make_selectable,
	ari_make_selected,
	ari_make_unselectable,
	ari_make_unselected,
	ari_show_handsorting_buttons_for,
	arrAdd,
	arrAverage,
	arrBuckets,
	arrChildren,
	arrClear,
	arrCount,
	arrCycle,
	arrExtend,
	arrFirst,
	arrFlatten,
	arrFromIndex,
	arrFromTo,
	arrFunc,
	arrIndices,
	arrLast,
	arrLastOfLast,
	arrMax,
	arrMin,
	arrMinMax,
	arrMinus,
	arrNext,
	arrNoDuplicates,
	arrPlus,
	arrPrev,
	arrRange,
	arrRemove,
	arrRemoveDuplicates,
	arrRemoveLast,
	arrRemovip,
	arrRepeat,
	arrReplace,
	arrReplace1,
	arrReverse,
	arrRotate,
	arrShufflip,
	arrSplitAtIndex,
	arrSplitByIndices,
	arrSum,
	arrSwap,
	arrTake,
	arrTakeLast,
	arrTakeWhile,
	arrToMatrix,
	arrWithout,
	arrZip,
	arr_get_max,
	arr_get_min,
	assertion,
	audio_beep,
	audio_onclick_pp,
	audio_pause,
	audio_play,
	audio_playing,
	audio_toggle,
	autocomplete,
	autocomplete_addActive,
	autocomplete_closeAllLists,
	autocomplete_removeActive,
	bCapturedPieces,
	bCheck,
	bCreateEmpty,
	bFreeRayDir,
	bFreeRayDir1,
	bFullCol,
	bFullDiag,
	bFullDiag2,
	bFullRow,
	bGetChunks,
	bGetChunksWithIndices,
	bGetCol,
	bGetCols,
	bGetRow,
	bGetRows,
	bGetSubMatrix,
	bGetSubMatrixWithIndices,
	bNei,
	bNeiDir,
	bPartialCol,
	bPartialDiag,
	bPartialDiag2,
	bPartialRow,
	bRayDir,
	bStrideCol,
	bStrideColFrom,
	bStrideDiag2From,
	bStrideDiagFrom,
	bStrideRow,
	bStrideRowFrom,
	beautify_history,
	boardArrOmitFirstRowCol,
	boardToNode,
	bottom_elem_from_to,
	bottom_elem_from_to_top,
	cCenterOrigin,
	cCircle,
	cClear,
	cColor,
	cEllipse,
	cLine,
	cRect,
	cSetOrigin,
	cShadow,
	cStyle,
	cStyle_dep,
	calc_hand_value,
	calculateDaysBetweenDates,
	cap_each_word,
	capitalize,
	cardFromInfo,
	catanBoard,
	checkBoardEmpty,
	checkBoardFull,
	checkPotentialTTT,
	checkSudokuRule,
	checkSudokuRule_trial1,
	checkWinner,
	checkWinnerC4,
	checkWinnerPossible,
	checkWinnerTTT,
	choose,
	chooseRandom,
	circleCenters,
	clamp,
	clearElement,
	clearFleetingMessage,
	clear_select,
	clear_selection,
	clear_status,
	clear_timeouts,
	clear_title,
	clear_transaction,
	coin,
	collect_game_specific_options,
	colorChannelMixer,
	colorDark,
	colorFrom,
	colorFromHSL,
	colorHSL,
	colorHSLBuild,
	colorHex,
	colorHue,
	colorHueWheel,
	colorIdealText,
	colorLight,
	colorMap,
	colorMix,
	colorMixer,
	colorPalette,
	colorPaletteFromImage,
	colorPaletteFromUrl,
	colorRGB,
	colorShades,
	colorTrans,
	colorTransPalette,
	colorWheel,
	colorsFromBFA,
	complexCompare,
	compute_hidden,
	contains,
	continue_after_error,
	convert_to_range,
	copyKeys,
	correctPolys,
	correct_handsorting,
	countAll,
	create_card_assets_c52,
	create_fen_deck,
	csv2list,
	cycle,
	dSquare,
	date2locale,
	dbSave,
	db_create,
	db_delete,
	db_init,
	db_readall,
	db_update,
	deactivate_ui,
	default_allowDrop,
	delete_table,
	destroySudokuRule,
	dict2list,
	distance,
	divInt,
	doit,
	downloadAsText,
	downloadAsYaml,
	downloadJson,
	download_all_functions,
	drawFlatHex,
	drawHex,
	drawPlainCircle,
	drawShape,
	drawSym,
	drawText,
	drawTriangle,
	draw_from_deck_to,
	draw_from_deck_to_board,
	elem_from_to,
	elem_from_to_top,
	empty_func,
	endsWith,
	ensureColorDict,
	errlog,
	evNoBubble,
	evStop,
	evToClass,
	evToClosestId,
	evToId,
	evToItem,
	evToProp,
	evToTargetAttribute,
	ev_to_gname,
	exchange_by_index,
	expandBoard,
	face_down,
	face_down_alt,
	face_up,
	ferro_get_card,
	fillColarr,
	findAncestorElemOfType,
	findAncestorElemWithParentOfType,
	findAttributeInAncestors,
	findChildOfType,
	findChildWithClass,
	findChildWithId,
	findChildrenOfType,
	findDescendantOfType,
	findDescendantWithId,
	findKeys,
	findParentWithClass,
	findParentWithId,
	find_card,
	find_index_of_jolly,
	find_jolly_rank,
	find_minimum,
	find_minimum_by_function,
	fireClick,
	fireKey,
	fireWheel,
	firstCond,
	firstCondDict,
	firstCondDictKey,
	firstCondDictKeys,
	firstNCond,
	firstNumber,
	firstWord,
	firstWordAfter,
	fisherYates,
	fleetingMessage,
	forAll,
	formatDate,
	format_currency,
	format_date,
	fromLocalStorage,
	fromUmlaut,
	fromYaml,
	gBg,
	gCanvas,
	gCreate,
	gEllipse,
	gFg,
	gG,
	gHex,
	gLine,
	gPoly,
	gPos,
	gRect,
	gRounding,
	gShape,
	gSize,
	gSizeToContent,
	gStroke,
	gSvg,
	genCats,
	generate_table_name,
	germanize,
	getAnimals,
	getCaretCoordinates,
	getCenters,
	getCentersFromAreaSize,
	getCentersFromRowsCols,
	getCirclePoints,
	getColorHexes,
	getColorNames,
	getConsonants,
	getCornerVertices,
	getEllipsePoints,
	getFruid,
	getFunctionCallerName,
	getFunctionsNameThatCalledThisFunction,
	getFunctionSignature,
	getGSGElements,
	getGlobals,
	getHexPoly,
	getKeySets,
	getLettersExcept,
	getNature,
	getPoly,
	getQuadPoly,
	getRandomLetter,
	getRect,
	getSizeNeeded,
	getStyleProp,
	getSudokuPattern,
	getSudokuPatternFromDB,
	getTextAreaCurrentLine,
	getTextAreaCurrentWord,
	getTextWidth,
	getTriangleDownPoly,
	getTriangleUpPoly,
	getTypeOf,
	getUID,
	getVowels,
	get_admin_player,
	get_checked_radios,
	get_container_styles,
	get_containertitle_styles,
	get_default_options,
	get_game_color,
	get_group_rank,
	get_img_html,
	get_joker_info,
	get_keys,
	get_logout_button,
	get_mouse_pos,
	get_multi_trigger,
	get_next_human_player,
	get_next_player,
	get_now,
	get_playmode,
	get_present_order,
	get_screen_distance,
	get_sequence_suit,
	get_texture,
	get_timestamp,
	get_user_color,
	get_user_pic,
	get_user_pic_and_name,
	get_user_pic_html,
	get_values,
	get_waiting_html,
	get_weekday,
	hFunc,
	hasDuplicate,
	hasWhiteSpace,
	has_at_most_n_jolly,
	has_jolly,
	hex1Board,
	hex1Centers,
	hex1Count,
	hex1Indices,
	hexAToHSLA,
	hexCenters,
	hexCornerNodes,
	hexToHSL,
	hide,
	hide0,
	hide_buildings,
	hslToHex,
	iAdd,
	iClear,
	iDelete,
	iDiv,
	iFromRowCol,
	iG,
	iMeasure,
	iReg,
	iRegister,
	iRepair,
	iSvg,
	iToRowCol,
	iTrim,
	i_am_acting_host,
	i_am_host,
	i_am_trigger,
	if_hotseat_autoswitch,
	if_plural,
	if_stringified,
	if_stringified_or_dict,
	if_stringified_or_list,
	if_stringified_or_string,
	incInput,
	indexOfAny,
	insertColNew,
	insertRowNew,
	intersection,
	isAlphaNum,
	isCloseTo,
	isDOM,
	isDict,
	isDictOrList,
	isDigit,
	isEmpty,
	isEmptyOrWhiteSpace,
	isLetter,
	isList,
	isListOf,
	isLiteral,
	isNumber,
	isOppPiece,
	isOverflown,
	isString,
	isSvg,
	isVisible,
	isWhiteSpace,
	isWhiteSpace2,
	isWhiteSpaceString,
	is_advanced_user,
	is_card_key,
	is_collect_mode,
	is_joker,
	is_jolly,
	is_just_my_turn,
	is_key_down,
	is_multi_stage,
	is_multi_trigger,
	is_overlapping_set,
	is_playerdata_set,
	is_playing,
	is_shield_mode,
	is_stringified,
	isdef,
	jolly_matches,
	jsClean,
	jsCopy,
	jsCopySafe,
	jsonToYaml,
	lastCond,
	lastDescendantOfType,
	lastIndexOfAny,
	last_elem_from_to,
	lerp,
	list2dict,
	load_assets_direct,
	load_assets_fetch,
	load_config,
	load_config_fast,
	load_config_new,
	load_db,
	load_syms,
	loader_off,
	loader_on,
	log_array,
	log_object,
	lookup,
	lookupAddIfToList,
	lookupAddToList,
	lookupSet,
	lookupSetOverride,
	luxury_card_deco,
	mAnimate,
	mAnimateList,
	mAnimateTo,
	mAppear,
	mAppend,
	mAttrs,
	mAutocomplete,
	mBackground,
	mBoxFromMargins,
	mButton,
	mButtonX,
	mBy,
	mCanvas,
	mCard,
	mCardButton,
	mCardText,
	mCenter,
	mCenterCenter,
	mCenterCenterFlex,
	mCenterFlex,
	mClass,
	mClass0,
	mClassRemove,
	mClassReplace,
	mClassToggle,
	mClear,
	mColFlex,
	mColorLetters,
	mColorPickerBehavior,
	mColorPickerControl,
	mConfine,
	mContainerSplay,
	mCreate,
	mCreateFrom,
	mDataTable,
	mDiv,
	mDiv100,
	mDivItem,
	mDivLR,
	mDivLine,
	mDover,
	mDraggable,
	mDroppable,
	mEdit,
	mEditNumber,
	mEditRange,
	mEditX,
	mEditableInput,
	mEditableOnEdited,
	mFade,
	mFadeClear,
	mFadeClearShow,
	mFadeRemove,
	mFall,
	mFleeting,
	mFlex,
	mFlexColumn,
	mFlexEvenly,
	mFlexLR,
	mFlexSpacebetween,
	mFlexWrap,
	mFlip,
	mForm,
	mFromPoint,
	mGetStyle,
	mGrid,
	mHide,
	mIfNotRelative,
	mImage,
	mImg,
	mInput,
	mInsert,
	mInsertAfter,
	mInsertAt,
	mInsertFirst,
	mItem,
	mItemSplay,
	mLine,
	mLinebreak,
	mLinebreakFlex,
	mLink,
	mMagnifyOnHoverControl,
	mMagnifyOnHoverControlPopup,
	mMagnifyOnHoverControlRemove,
	mMeasure,
	mNode,
	mPlace,
	mPlayPause,
	mPopup,
	mPos,
	mPulse,
	mPulse1,
	mPulse2,
	mPulse3,
	mPuppet,
	mRadio,
	mRadio1,
	mRadioGroup,
	mRadioToggle,
	mRemove,
	mRemoveChildrenFromIndex,
	mRise,
	mScale,
	mSearch,
	mSection,
	mSelectTableRow,
	mShield,
	mShieldsOff,
	mShow,
	mShrink,
	mShrinkTranslate,
	mShrinkUp,
	mSize,
	mSpan,
	mStamp,
	mStyle,
	mStyleGet,
	mStyleOrClass,
	mStyleRemove,
	mStyleTranslate,
	mStyleUndo,
	mSuit,
	mSym,
	mSymSizeToBox,
	mSymSizeToFz,
	mSymSizeToH,
	mSymSizeToW,
	mSymText,
	mTable,
	mTableCol,
	mTableCommandify,
	mTableCommandifyList,
	mTableHeader,
	mTableRow,
	mTableTransition,
	mTag,
	mText,
	mTextWidth,
	mTextarea,
	mToggle,
	mTogglebar,
	mToolbar,
	mTranslate,
	mTranslateBy,
	mTranslateByFade,
	mYaml,
	maButton,
	makeCategories,
	makeEdge,
	makeUnitString,
	make_card_selectable,
	make_card_selected,
	make_card_unselectable,
	make_card_unselected,
	make_container_selectable,
	make_container_selected,
	make_container_unselectable,
	make_container_unselected,
	make_deck_selectable,
	make_deck_selected,
	make_deck_unselectable,
	make_deck_unselected,
	make_hand_selectable,
	make_hand_selected,
	make_hand_unselectable,
	make_hand_unselected,
	make_market_selectable,
	make_market_selected,
	make_market_unselectable,
	make_market_unselected,
	make_string_selectable,
	make_string_selected,
	make_string_unselectable,
	make_string_unselected,
	map_range,
	measureText,
	measure_fieldset,
	mgSvg,
	mgTag,
	mgText,
	miPic,
	neighborhood,
	new_cards_animation,
	normalize_string,
	nundef,
	object2string,
	old_mButtonX,
	oneCircleCenters,
	oneWordKeys,
	onpagedeactivated,
	oscillate_between,
	pSBC,
	pack_table,
	parseCodefile,
	path2UI,
	path2fen,
	player_stat_count,
	plural,
	polyPointsFrom,
	pop_top,
	posToPoint,
	post_json,
	printBoard,
	printMatrix,
	printState,
	quadCenters,
	rAdd,
	rAddSub,
	rAddSubRange,
	rAlphanums,
	rCard,
	rChoose,
	rCoin,
	rColor,
	rConsonant,
	rDate,
	rDigits,
	rFloat,
	rGaussian,
	rHue,
	rLetter,
	rLetters,
	rName,
	rNumber,
	rPassword,
	rPerlin,
	rPrimaryColor,
	rRank,
	rSuit,
	rVowel,
	rWheel,
	randomColor,
	range,
	recConvertLists,
	reduceBoard,
	removeColNew,
	removeDuplicates,
	removeInPlace,
	removeRowNew,
	remove_card_shadow,
	remove_from_selection,
	remove_hourglass,
	remove_player,
	replaceAll,
	replaceAllFast,
	replaceAllSafe,
	replaceAllSpecialChars,
	replaceAllX,
	replaceAtString,
	replaceEvery,
	replaceWhite,
	replace_jolly,
	resetUIDs,
	restart_selection_process,
	return_elem_to_deck_from,
	reverse,
	rgb2float,
	rgb2hex,
	rgbToHex,
	rgbaStr,
	round_change_animation,
	route_path_json,
	route_path_text,
	route_path_yaml_dict,
	route_post_json,
	run_for_seconds,
	sameList,
	saveFileAtClient,
	say,
	selectText,
	select_add_items,
	select_clear_previous_level,
	select_confirm_weiter,
	select_error,
	select_highlight,
	select_last,
	select_timer,
	select_toggle,
	setKeys,
	setRect,
	set_card_border,
	set_card_style,
	set_card_style_works,
	set_player,
	set_player_strategy,
	set_run_state,
	set_run_state_local,
	set_run_state_no_server,
	set_run_state_vps,
	set_user,
	sheriff_card,
	shield_off,
	shield_on,
	show,
	show0,
	showFleetingMessage,
	show_MMM,
	show_admin_ui,
	show_fleeting_message,
	show_game_options,
	show_games,
	show_handsorting_buttons_for,
	show_history,
	show_history_layout,
	show_history_popup,
	show_home_logo,
	show_hourglass,
	show_instruction,
	show_message,
	show_options_popup,
	show_player_button,
	show_playerdatastate,
	show_polling_signal,
	show_role,
	show_settings,
	show_special_message,
	show_stage,
	show_status,
	show_strategy_popup,
	show_tables,
	show_title,
	show_username,
	show_users,
	show_view_buildings_button,
	show_waiting_for_ack_message,
	show_waiting_message,
	show_winners,
	shuffle,
	shuffleChildren,
	shuffle_children,
	shuffletest,
	simpleCompare,
	simulateClick,
	size2hex,
	size2tridown,
	size2triup,
	sortCaseInsensitive,
	sortBy,
	sortByDescending,
	sortByFunc,
	sortByFuncDescending,
	sortByRank,
	sortCardItemsByRank,
	sortCardItemsBySuit,
	sortCardItemsToSequence,
	sortNumbers,
	sort_cards,
	splitAtAnyOf,
	splitIntoNumbersAndWords,
	spread_hand,
	sss,
	sss1,
	start_simple_timer,
	start_transaction,
	startsWith,
	staticTitle,
	status_message_new,
	stop_simple_timer,
	stop_timer,
	stringAfter,
	stringAfterLast,
	stringBefore,
	stringBeforeLast,
	stringBetween,
	stringBetweenLast,
	stringLast,
	stringToMatrix,
	stripToKeys,
	sudokuSampleToIndexMatrix,
	switch_uname,
	symbolcolor,
	tableLayoutMR,
	timeConversion,
	toBoardString,
	toDegree,
	toElem,
	toLetters,
	toLocalStorage,
	toModulo,
	toRadian,
	toUmlaut,
	toWords,
	toYaml,
	to_aristocard,
	to_commissioncard,
	to_luxurycard,
	to_rumorcard,
	toggleSelection,
	toggleSelectionOfPicture,
	toggle_face,
	toggle_select,
	top_elem_from_to,
	top_elem_from_to_top,
	translateStylesToCy,
	translateToCssStyle,
	ui_add_cards_to_deck_container,
	ui_add_cards_to_hand_container,
	ui_add_container_title,
	ui_make_container,
	ui_make_deck_container,
	ui_make_hand_container,
	ui_player_info,
	ui_type_building,
	ui_type_church,
	ui_type_deck,
	ui_type_hand,
	ui_type_lead_hand,
	ui_type_market,
	ui_type_rank_count,
	unfocusOnEnter,
	valf,
	valfi,
	valnwhite,
} = require('./basejs/servercode.js');
//#endregion







